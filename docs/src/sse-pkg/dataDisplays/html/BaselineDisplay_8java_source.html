<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OpenSonATA Source Code Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<a href="../../index.html">Back to setiCode Home</a><BR>

<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>BaselineDisplay.java</h1><a href="BaselineDisplay_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Class that displays the Baseline Display.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Project: OpenSonATA</span>
<a name="l00005"></a>00005 <span class="comment"> * Version: 1.0</span>
<a name="l00006"></a>00006 <span class="comment"> * Author:  Jon Richards (current maintainer)</span>
<a name="l00007"></a>00007 <span class="comment"> *          The OpenSonATA code is the result of many programmers over many</span>
<a name="l00008"></a>00008 <span class="comment"> *          years.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * This class displays baseline display of SonATA data.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * Copyright 2010 The SETI Institute</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span>
<a name="l00015"></a>00015 <span class="comment"> * you may not use this file except in compliance with the License.</span>
<a name="l00016"></a>00016 <span class="comment"> * You may obtain a copy of the License at</span>
<a name="l00017"></a>00017 <span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0 Unless required by</span>
<a name="l00018"></a>00018 <span class="comment"> * applicable law or agreed to in writing, software distributed</span>
<a name="l00019"></a>00019 <span class="comment"> * under the License is distributed on an "AS IS" BASIS, WITHOUT</span>
<a name="l00020"></a>00020 <span class="comment"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00021"></a>00021 <span class="comment"> * See the License for the specific language governing permissions</span>
<a name="l00022"></a>00022 <span class="comment"> * and limitations under the License.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * Attribution must be: “Licensed through SETI” in all published </span>
<a name="l00025"></a>00025 <span class="comment"> * uses of the software including analytics based on the software, </span>
<a name="l00026"></a>00026 <span class="comment"> * combined and merged software, papers, articles, books, reports, </span>
<a name="l00027"></a>00027 <span class="comment"> * web pages, etc.</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 
<a name="l00045"></a>00045 <span class="keyword">package </span>opensonata.dataDisplays;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">import</span> javax.swing.*;
<a name="l00048"></a>00048 <span class="keyword">import</span> javax.swing.border.*;
<a name="l00049"></a>00049 <span class="keyword">import</span> javax.swing.event.*;
<a name="l00050"></a>00050 <span class="keyword">import</span> java.awt.*;
<a name="l00051"></a>00051 <span class="keyword">import</span> java.awt.event.*;
<a name="l00052"></a>00052 <span class="keyword">import</span> java.awt.image.*;
<a name="l00053"></a>00053 <span class="keyword">import</span> java.awt.geom.*;
<a name="l00054"></a>00054 <span class="keyword">import</span> java.io.*;
<a name="l00055"></a>00055 <span class="keyword">import</span> java.text.*;
<a name="l00056"></a>00056 <span class="keyword">import</span> javax.swing.filechooser.*;
<a name="l00057"></a>00057 <span class="keyword">import</span> javax.imageio.*;
<a name="l00058"></a>00058 <span class="keyword">import</span> java.awt.print.PrinterJob;
<a name="l00059"></a>00059 <span class="keyword">import</span> java.awt.print.*;
<a name="l00060"></a>00060 <span class="keyword">import</span> ptolemy.plot.*;
<a name="l00061"></a>00061 
<a name="l00068"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html">00068</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html">BaselineDisplay</a> <span class="keyword">extends</span> JApplet implements <a class="code" href="interfaceopensonata_1_1dataDisplays_1_1ReadoutListener.html">ReadoutListener</a> 
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070 
<a name="l00071"></a>00071     <span class="comment">// BaselineDisplay instance data</span>
<a name="l00072"></a>00072     JFrame frame;
<a name="l00073"></a>00073     String filename;
<a name="l00074"></a>00074     <span class="keywordtype">int</span> width;
<a name="l00075"></a>00075     <span class="keywordtype">int</span> height;
<a name="l00076"></a>00076     <span class="keywordtype">float</span> pixelScaleFactor;
<a name="l00077"></a>00077     <span class="keywordtype">float</span> pixelOffsetFactor;
<a name="l00078"></a>00078     BufferedImage origBuffImage;
<a name="l00079"></a>00079     BufferedImage scaledBuffImage;
<a name="l00080"></a>00080     <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html">ImagePanel</a> imagePanel;
<a name="l00081"></a>00081     <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html">BaselineDataFileScanner</a> fileScanner;
<a name="l00082"></a>00082     JLabel currentFileText;
<a name="l00083"></a>00083     PrinterJob printJob;
<a name="l00084"></a>00084     <a class="code" href="classopensonata_1_1dataDisplays_1_1ReadoutPlot.html">ReadoutPlot</a> readoutPlot;  
<a name="l00085"></a>00085     JLabel rfCenterFreqValueLabel;
<a name="l00086"></a>00086     JLabel bandwidthValueLabel;
<a name="l00087"></a>00087     JLabel polValueLabel;
<a name="l00088"></a>00088     JLabel subbandFreqReadoutValueLabel;
<a name="l00089"></a>00089     JLabel subbandNumberReadoutValueLabel;
<a name="l00090"></a>00090     JLabel subbandPowerReadoutValueLabel;
<a name="l00091"></a>00091     JLabel halfFrameNumberValueLabel;
<a name="l00092"></a>00092     <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html">Baseline</a> baseline;
<a name="l00093"></a>00093     <span class="keywordtype">boolean</span> slowPlay;
<a name="l00094"></a>00094     <span class="keywordtype">double</span>[] accumBaselineValue;
<a name="l00095"></a>00095     <span class="keywordtype">int</span> baselineCount;
<a name="l00096"></a>00096     <span class="keywordtype">boolean</span> useTimeAvg;
<a name="l00097"></a>00097     <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> MAX_SUBBANDS = 4096;
<a name="l00098"></a>00098 
<a name="l00103"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html">00103</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html">ImagePanel</a> <span class="keyword">extends</span> JPanel implements Printable 
<a name="l00104"></a>00104     {
<a name="l00105"></a>00105         BufferedImage image;
<a name="l00106"></a>00106 
<a name="l00110"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#c6582eff3ec5beeb8a29d31e20398f04">00110</a>         <span class="keyword">public</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#c6582eff3ec5beeb8a29d31e20398f04">ImagePanel</a>()
<a name="l00111"></a>00111         {
<a name="l00112"></a>00112         }
<a name="l00113"></a>00113 
<a name="l00119"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#8ef836a3754b625ec72d868deeb8ab92">00119</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#8ef836a3754b625ec72d868deeb8ab92">setImage</a>(BufferedImage image)
<a name="l00120"></a>00120         {
<a name="l00121"></a>00121             this.image = image;
<a name="l00122"></a>00122         }
<a name="l00123"></a>00123 
<a name="l00129"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#bd3e95a6f4c88f02241b11d5eb0b0261">00129</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#bd3e95a6f4c88f02241b11d5eb0b0261">paintComponent</a>(Graphics g)
<a name="l00130"></a>00130         {
<a name="l00131"></a>00131             super.paintComponent(g); <span class="comment">// paint background</span>
<a name="l00132"></a>00132 
<a name="l00133"></a>00133             <span class="comment">//System.out.println("Painting");</span>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135             <span class="comment">// Draw image at its natural size.</span>
<a name="l00136"></a>00136             g.drawImage(image, 0, 0, <span class="keyword">this</span>); 
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         }
<a name="l00139"></a>00139 
<a name="l00151"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#f655b98c3b42dd8f369cdef251ea690e">00151</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#f655b98c3b42dd8f369cdef251ea690e">print</a>(Graphics g, PageFormat pageFormat, <span class="keywordtype">int</span> pageIndex) <span class="keywordflow">throws</span> PrinterException 
<a name="l00152"></a>00152         {
<a name="l00153"></a>00153             <span class="keywordflow">if</span> (pageIndex &gt;= 1)
<a name="l00154"></a>00154             {
<a name="l00155"></a>00155                 <span class="keywordflow">return</span> Printable.NO_SUCH_PAGE;
<a name="l00156"></a>00156             }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158             <span class="comment">// create a copy of the image that has the grayscale </span>
<a name="l00159"></a>00159             <span class="comment">// inverted (black for white) to save toner on printouts</span>
<a name="l00160"></a>00160             <span class="keywordtype">int</span> tableLen = 256;
<a name="l00161"></a>00161             <span class="keywordtype">short</span>[] grayscaleInvertTable = <span class="keyword">new</span> <span class="keywordtype">short</span>[tableLen];
<a name="l00162"></a>00162             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tableLen; i++)
<a name="l00163"></a>00163             {
<a name="l00164"></a>00164                 grayscaleInvertTable[i] = (short) ((tableLen-1) - i);
<a name="l00165"></a>00165             }
<a name="l00166"></a>00166             BufferedImageOp grayInvertOp =
<a name="l00167"></a>00167                 <span class="keyword">new</span> LookupOp(<span class="keyword">new</span> ShortLookupTable(0, grayscaleInvertTable), null);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169             BufferedImage grayInvertedImage = 
<a name="l00170"></a>00170                 <span class="keyword">new</span> BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
<a name="l00171"></a>00171             grayInvertOp.filter(image, grayInvertedImage);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173             Graphics2D g2 = (Graphics2D) g;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175             <span class="comment">//--- Translate the origin to 0,0 for the top left corner</span>
<a name="l00176"></a>00176             g2.translate (pageFormat.getImageableX (), pageFormat.getImageableY ());
<a name="l00177"></a>00177 
<a name="l00178"></a>00178             <span class="comment">// Scale the image to fit properly on the output printed page.</span>
<a name="l00179"></a>00179             <span class="keywordtype">double</span> POINTS_PER_INCH = 72;
<a name="l00180"></a>00180             <span class="keywordtype">double</span> widthScaleFactor = pageFormat.getImageableWidth()  
<a name="l00181"></a>00181                 / POINTS_PER_INCH;
<a name="l00182"></a>00182             <span class="keywordtype">double</span> heightScaleFactor = pageFormat.getImageableHeight() 
<a name="l00183"></a>00183                 / POINTS_PER_INCH; 
<a name="l00184"></a>00184 
<a name="l00185"></a>00185             g2.drawImage (grayInvertedImage,
<a name="l00186"></a>00186                     (<span class="keywordtype">int</span>) (0.25 * POINTS_PER_INCH),
<a name="l00187"></a>00187                     (<span class="keywordtype">int</span>) (0.25 * POINTS_PER_INCH),
<a name="l00188"></a>00188                     (<span class="keywordtype">int</span>) (widthScaleFactor * POINTS_PER_INCH),
<a name="l00189"></a>00189                     (<span class="keywordtype">int</span>) (heightScaleFactor * POINTS_PER_INCH),  
<a name="l00190"></a>00190                     <span class="keyword">this</span>);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192             <span class="keywordflow">return</span> Printable.PAGE_EXISTS;
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 
<a name="l00203"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html">00203</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html">Baseline</a>
<a name="l00204"></a>00204     {
<a name="l00205"></a>00205         <span class="keywordtype">int</span> maxSubbands = 10000;  <span class="comment">// sanity check</span>
<a name="l00206"></a>00206         <span class="keywordtype">int</span> headerSizeBytes = 32;
<a name="l00207"></a>00207         <span class="keywordtype">int</span> bytesPerBaselineValue = 4;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209         <span class="comment">// header</span>
<a name="l00210"></a>00210         <span class="keywordtype">double</span> rfCenterFrequency;
<a name="l00211"></a>00211         <span class="keywordtype">double</span> bandwidth;
<a name="l00212"></a>00212         <span class="keywordtype">int</span> halfFrameNumber;
<a name="l00213"></a>00213         <span class="keywordtype">int</span> numberOfSubbands;
<a name="l00214"></a>00214         <span class="keywordtype">int</span> polarization;  <span class="comment">// defined as Polarization enum.  Assumed to be 32bit.</span>
<a name="l00215"></a>00215         <span class="keywordtype">int</span> alignPad;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217         <span class="comment">// variable length body</span>
<a name="l00218"></a>00218         <span class="keywordtype">float</span>[] baselineValue;
<a name="l00219"></a>00219 
<a name="l00225"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#53787b1c0592afadeddf18b543bd4e04">00225</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#53787b1c0592afadeddf18b543bd4e04">getHeaderSizeBytes</a>()
<a name="l00226"></a>00226         {
<a name="l00227"></a>00227 
<a name="l00228"></a>00228             <span class="keywordflow">return</span> headerSizeBytes;
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230 
<a name="l00236"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#3ff3090c4f6bf8cd35a80e7378b316dc">00236</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#3ff3090c4f6bf8cd35a80e7378b316dc">getBodySizeBytes</a>()
<a name="l00237"></a>00237         {
<a name="l00238"></a>00238             <span class="keywordtype">int</span> bodySizeBytes = numberOfSubbands *  bytesPerBaselineValue;          
<a name="l00239"></a>00239 
<a name="l00240"></a>00240             <span class="keywordflow">return</span> bodySizeBytes;
<a name="l00241"></a>00241         }
<a name="l00242"></a>00242 
<a name="l00250"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#4a6696ed0d18fb87f4a78e0123a7fb95">00250</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#4a6696ed0d18fb87f4a78e0123a7fb95">read</a>(DataInputStream in) <span class="keywordflow">throws</span> java.io.IOException 
<a name="l00251"></a>00251         {
<a name="l00252"></a>00252             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#338cf032d83c0d888341d71352a23e2a">readHeader</a>(in);
<a name="l00253"></a>00253             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#2cf1dcc275559a82cbcd3cff00f43fbe">readBody</a>(in);
<a name="l00254"></a>00254         }
<a name="l00255"></a>00255 
<a name="l00262"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#338cf032d83c0d888341d71352a23e2a">00262</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#338cf032d83c0d888341d71352a23e2a">readHeader</a>(DataInputStream in) <span class="keywordflow">throws</span> java.io.IOException {
<a name="l00263"></a>00263 
<a name="l00264"></a>00264             <span class="comment">// read the header</span>
<a name="l00265"></a>00265             rfCenterFrequency = in.readDouble();
<a name="l00266"></a>00266             bandwidth = in.readDouble();
<a name="l00267"></a>00267             halfFrameNumber = in.readInt();
<a name="l00268"></a>00268             numberOfSubbands = in.readInt();
<a name="l00269"></a>00269             polarization = in.readInt();
<a name="l00270"></a>00270             alignPad = in.readInt();
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         }
<a name="l00273"></a>00273 
<a name="l00280"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#2cf1dcc275559a82cbcd3cff00f43fbe">00280</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#2cf1dcc275559a82cbcd3cff00f43fbe">readBody</a>(DataInputStream in) <span class="keywordflow">throws</span> java.io.IOException {
<a name="l00281"></a>00281 
<a name="l00282"></a>00282             <span class="comment">// read the variable length baseline value array</span>
<a name="l00283"></a>00283             <span class="keywordflow">if</span> (numberOfSubbands &lt; 1 || numberOfSubbands &gt; maxSubbands)
<a name="l00284"></a>00284             {
<a name="l00285"></a>00285                 System.out.println(
<a name="l00286"></a>00286                         <span class="stringliteral">"ERROR: subbands value "</span> + numberOfSubbands +
<a name="l00287"></a>00287                         <span class="stringliteral">" out of range.  Must be 1 - "</span> + maxSubbands);
<a name="l00288"></a>00288                 <span class="comment">//System.exit(1);</span>
<a name="l00289"></a>00289 
<a name="l00290"></a>00290                 <span class="keywordflow">throw</span> <span class="keyword">new</span> java.io.IOException();
<a name="l00291"></a>00291             }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293             baselineValue = <span class="keyword">new</span> <span class="keywordtype">float</span>[numberOfSubbands];
<a name="l00294"></a>00294             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numberOfSubbands; ++i)
<a name="l00295"></a>00295             {
<a name="l00296"></a>00296                 baselineValue[i] = in.readFloat();
<a name="l00297"></a>00297             }
<a name="l00298"></a>00298 
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300 
<a name="l00307"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#f03e0924bfbcafdf19603613feccef8b">00307</a>         <span class="keyword">private</span> String <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#f03e0924bfbcafdf19603613feccef8b">polIntToString</a>(<span class="keywordtype">int</span> pol)
<a name="l00308"></a>00308         {
<a name="l00309"></a>00309             String value;
<a name="l00310"></a>00310             <span class="keywordflow">switch</span> (pol)
<a name="l00311"></a>00311             {
<a name="l00312"></a>00312                 <span class="keywordflow">case</span> 0: value =<span class="stringliteral">"R"</span>;  <span class="comment">// right circular</span>
<a name="l00313"></a>00313                         <span class="keywordflow">break</span>;
<a name="l00314"></a>00314                 <span class="keywordflow">case</span> 1: value = <span class="stringliteral">"L"</span>; <span class="comment">// left circular</span>
<a name="l00315"></a>00315                         <span class="keywordflow">break</span>;
<a name="l00316"></a>00316                 <span class="keywordflow">case</span> 2: value = <span class="stringliteral">"B"</span>; <span class="comment">// both</span>
<a name="l00317"></a>00317                         <span class="keywordflow">break</span>;
<a name="l00318"></a>00318                 <span class="keywordflow">case</span> 3: value = <span class="stringliteral">"M"</span>; <span class="comment">// mixed</span>
<a name="l00319"></a>00319                         <span class="keywordflow">break</span>;
<a name="l00320"></a>00320                 <span class="keywordflow">default</span>: value = <span class="stringliteral">"?"</span>;
<a name="l00321"></a>00321                          <span class="keywordflow">break</span>;
<a name="l00322"></a>00322             }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324             <span class="keywordflow">return</span> value;
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326 
<a name="l00332"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#cdebd7d36e7c5028f4e85dbc755ed159">00332</a>         <span class="keyword">public</span> String <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#cdebd7d36e7c5028f4e85dbc755ed159">getPolAsString</a>()
<a name="l00333"></a>00333         {
<a name="l00334"></a>00334             <span class="keywordflow">return</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#f03e0924bfbcafdf19603613feccef8b">polIntToString</a>(polarization);
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336 
<a name="l00340"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#7783762106794fcfb3a388ec848722ad">00340</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#7783762106794fcfb3a388ec848722ad">printHeader</a>()
<a name="l00341"></a>00341         {
<a name="l00342"></a>00342             System.out.println(
<a name="l00343"></a>00343                     <span class="stringliteral">"rfcenterFreq "</span> + rfCenterFrequency + <span class="stringliteral">" MHz,"</span> +
<a name="l00344"></a>00344                     <span class="stringliteral">" bandwidth "</span> + bandwidth + <span class="stringliteral">" MHz,"</span> +
<a name="l00345"></a>00345                     <span class="stringliteral">" halfFrameNumber "</span> + halfFrameNumber + <span class="stringliteral">","</span> +
<a name="l00346"></a>00346                     <span class="stringliteral">" #subbands "</span> +  numberOfSubbands + <span class="stringliteral">","</span> +
<a name="l00347"></a>00347                     <span class="stringliteral">" pol "</span> + <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#f03e0924bfbcafdf19603613feccef8b">polIntToString</a>(polarization)
<a name="l00348"></a>00348                     );
<a name="l00349"></a>00349             <span class="comment">// alignPad</span>
<a name="l00350"></a>00350         }
<a name="l00351"></a>00351 
<a name="l00355"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#9e1a52f27c978801e75916b58f2c7f61">00355</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#9e1a52f27c978801e75916b58f2c7f61">printBody</a>()
<a name="l00356"></a>00356         {
<a name="l00357"></a>00357             <span class="keywordtype">int</span> maxToPrint = 5;
<a name="l00358"></a>00358             System.out.print(<span class="stringliteral">"baselineValues: "</span>);
<a name="l00359"></a>00359             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;maxToPrint &amp;&amp; i&lt;numberOfSubbands; ++i)
<a name="l00360"></a>00360             {
<a name="l00361"></a>00361                 System.out.print(baselineValue[i] + <span class="stringliteral">" "</span>);
<a name="l00362"></a>00362             }
<a name="l00363"></a>00363             System.out.println(<span class="stringliteral">""</span>);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365         }
<a name="l00366"></a>00366 
<a name="l00367"></a>00367     }
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 
<a name="l00384"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#f8037e3d23666e13f88124c78c3198d9">00384</a>     <span class="keyword">public</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#f8037e3d23666e13f88124c78c3198d9">BaselineDisplay</a>(JFrame frame, String filename,
<a name="l00385"></a>00385             <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, 
<a name="l00386"></a>00386             <span class="keywordtype">float</span> pixelScaleFactor,  <span class="keywordtype">float</span> pixelOffsetFactor,
<a name="l00387"></a>00387             <span class="keywordtype">boolean</span> slowPlay,
<a name="l00388"></a>00388             <span class="keywordtype">boolean</span> useTimeAvg)
<a name="l00389"></a>00389     {
<a name="l00390"></a>00390         this.frame = frame;
<a name="l00391"></a>00391         this.filename = filename;
<a name="l00392"></a>00392         this.width = width;
<a name="l00393"></a>00393         this.height = height;
<a name="l00394"></a>00394         this.pixelScaleFactor = pixelScaleFactor;
<a name="l00395"></a>00395         this.pixelOffsetFactor = pixelOffsetFactor;
<a name="l00396"></a>00396         this.slowPlay = slowPlay;
<a name="l00397"></a>00397         this.useTimeAvg = useTimeAvg;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399         origBuffImage = <span class="keyword">new</span> BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
<a name="l00400"></a>00400         scaledBuffImage = <span class="keyword">new</span> BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
<a name="l00401"></a>00401         baseline = <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html">Baseline</a>();
<a name="l00402"></a>00402 
<a name="l00403"></a>00403         this.accumBaselineValue = <span class="keyword">new</span> <span class="keywordtype">double</span>[MAX_SUBBANDS];
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     }
<a name="l00406"></a>00406 
<a name="l00413"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#c487310744c9485ac945db37c3a82255">00413</a>     <span class="keyword">private</span> <span class="keywordtype">double</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#c487310744c9485ac945db37c3a82255">convertSubbandNumberToFreq</a>(<span class="keywordtype">int</span> subband)
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415         <span class="keywordtype">int</span> numberOfSubbands = baseline.numberOfSubbands;
<a name="l00416"></a>00416         <span class="keywordtype">int</span> centerSubband = numberOfSubbands / 2;
<a name="l00417"></a>00417 
<a name="l00418"></a>00418         <span class="keywordtype">double</span> mhzPerSubband = baseline.bandwidth / 
<a name="l00419"></a>00419             numberOfSubbands;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <span class="comment">// figure out how far the desired subband is from the </span>
<a name="l00422"></a>00422         <span class="comment">// center.</span>
<a name="l00423"></a>00423 
<a name="l00424"></a>00424         <span class="keywordtype">double</span> freq = (subband - centerSubband) * mhzPerSubband +
<a name="l00425"></a>00425             baseline.rfCenterFrequency;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427         <span class="keywordflow">return</span> freq;
<a name="l00428"></a>00428     }
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 
<a name="l00440"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#29a3ff8882a3677aed8b2752928251ec">00440</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#29a3ff8882a3677aed8b2752928251ec">readoutData</a>(<a class="code" href="classopensonata_1_1dataDisplays_1_1ReadoutPlot.html">ReadoutPlot</a> source, 
<a name="l00441"></a>00441             <span class="keywordtype">double</span> xPlotValue, 
<a name="l00442"></a>00442             <span class="keywordtype">double</span> yPlotValue)
<a name="l00443"></a>00443     {
<a name="l00444"></a>00444         <span class="comment">//System.out.println("x=" + xPlotValue + " y=" + yPlotValue);</span>
<a name="l00445"></a>00445 
<a name="l00446"></a>00446         <span class="comment">// don't let subband number or power go negative</span>
<a name="l00447"></a>00447         <span class="keywordtype">int</span> subbandNumber = (int) (xPlotValue + 0.5);
<a name="l00448"></a>00448         <span class="keywordflow">if</span> (subbandNumber &lt; 0) subbandNumber = 0;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450         <span class="keywordtype">float</span> subbandPower = (float) yPlotValue;
<a name="l00451"></a>00451         <span class="keywordflow">if</span> (subbandPower &lt; 0) subbandPower = 0;
<a name="l00452"></a>00452 
<a name="l00453"></a>00453         <span class="keywordtype">double</span> freq = <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#c487310744c9485ac945db37c3a82255">convertSubbandNumberToFreq</a>(subbandNumber);
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 
<a name="l00456"></a>00456         DecimalFormat freqFormatter = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">"0000.000000 MHz  "</span>);
<a name="l00457"></a>00457         DecimalFormat subbandFormatter = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">"0000  "</span>);
<a name="l00458"></a>00458         DecimalFormat powerFormatter = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">"00000.000  "</span>);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         subbandFreqReadoutValueLabel.setText(freqFormatter.format(freq));
<a name="l00461"></a>00461         subbandNumberReadoutValueLabel.setText(subbandFormatter.format(subbandNumber));
<a name="l00462"></a>00462         subbandPowerReadoutValueLabel.setText(powerFormatter.format(subbandPower));
<a name="l00463"></a>00463 
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465 
<a name="l00475"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html">00475</a>     <span class="keyword">private</span> <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html">BaselineDataFileScanner</a> <span class="keyword">extends</span> Thread
<a name="l00476"></a>00476     {
<a name="l00477"></a>00477 
<a name="l00478"></a>00478         <span class="keywordtype">int</span> width;
<a name="l00479"></a>00479         <span class="keywordtype">int</span> height;
<a name="l00480"></a>00480         String filename;
<a name="l00481"></a>00481         DataInputStream in;
<a name="l00482"></a>00482         <span class="comment">// transform: shift image by 1 Y pixel</span>
<a name="l00483"></a>00483         AffineTransformOp aftOpShift1LineDown;
<a name="l00484"></a>00484         <span class="comment">// transform: copy image unchanged</span>
<a name="l00485"></a>00485         AffineTransformOp aftOpCopy;
<a name="l00486"></a>00486         BufferedImage shiftedBuffImage;
<a name="l00487"></a>00487 
<a name="l00495"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#f423b717058ea6c9947971d8eaff5fc6">00495</a>         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#f423b717058ea6c9947971d8eaff5fc6">BaselineDataFileScanner</a>(String filename, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00496"></a>00496         {
<a name="l00497"></a>00497 
<a name="l00498"></a>00498             this.width = width;
<a name="l00499"></a>00499             this.height = height;
<a name="l00500"></a>00500             this.filename = filename;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502             <span class="comment">// create transform to shift orig image down by 1 line (1 Y pixel)</span>
<a name="l00503"></a>00503             AffineTransform aftShift = <span class="keyword">new</span> AffineTransform();
<a name="l00504"></a>00504             aftShift.setToTranslation(0.0, 1.0);  <span class="comment">// shift y </span>
<a name="l00505"></a>00505             aftOpShift1LineDown = <span class="keyword">new</span> AffineTransformOp(aftShift, null);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507             <span class="comment">// create transform to copy orig image, unchanged</span>
<a name="l00508"></a>00508             AffineTransform aftCopy = <span class="keyword">new</span> AffineTransform();
<a name="l00509"></a>00509             aftCopy.setToTranslation(0.0, 0.0);  <span class="comment">// no shift</span>
<a name="l00510"></a>00510             aftOpCopy = <span class="keyword">new</span> AffineTransformOp(aftCopy, null);
<a name="l00511"></a>00511 
<a name="l00512"></a>00512             <span class="comment">// make empty temp image</span>
<a name="l00513"></a>00513             shiftedBuffImage = <span class="keyword">new</span> BufferedImage(width, height, 
<a name="l00514"></a>00514                     BufferedImage.TYPE_BYTE_GRAY);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516             start();
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518 
<a name="l00524"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#7e967f280564cf414707936f27899ef1">00524</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#7e967f280564cf414707936f27899ef1">openNewFile</a>(String filename)
<a name="l00525"></a>00525         {
<a name="l00526"></a>00526             this.filename = filename;
<a name="l00527"></a>00527             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#e040f009d179fd6a380eeb936d36b1ec">openFile</a>();
<a name="l00528"></a>00528         }
<a name="l00529"></a>00529 
<a name="l00533"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#e040f009d179fd6a380eeb936d36b1ec">00533</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#e040f009d179fd6a380eeb936d36b1ec">openFile</a>()
<a name="l00534"></a>00534         {
<a name="l00535"></a>00535             <span class="keywordflow">if</span> (filename != <span class="stringliteral">""</span>)
<a name="l00536"></a>00536             {
<a name="l00537"></a>00537 
<a name="l00538"></a>00538                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#16ea24fcacfb85f1bff116ccfc85a05b">clearPlot</a>();
<a name="l00539"></a>00539 
<a name="l00540"></a>00540                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#d9250079258736ad340448381207b848">resetTimeAvg</a>();
<a name="l00541"></a>00541 
<a name="l00542"></a>00542                 <span class="keywordflow">try</span>
<a name="l00543"></a>00543                 {
<a name="l00544"></a>00544                     in = <span class="keyword">new</span> DataInputStream(
<a name="l00545"></a>00545                             <span class="keyword">new</span> BufferedInputStream(
<a name="l00546"></a>00546                                 <span class="keyword">new</span> FileInputStream(filename)));
<a name="l00547"></a>00547                 }
<a name="l00548"></a>00548                 <span class="keywordflow">catch</span> (IOException e)
<a name="l00549"></a>00549                 {
<a name="l00550"></a>00550                     System.out.println(e);
<a name="l00551"></a>00551                 }
<a name="l00552"></a>00552             }
<a name="l00553"></a>00553         }
<a name="l00554"></a>00554 
<a name="l00558"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#cfc93b4b38b10b3ec52a6e72d625c26c">00558</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#cfc93b4b38b10b3ec52a6e72d625c26c">sleep</a>()
<a name="l00559"></a>00559         {
<a name="l00560"></a>00560             <span class="keywordflow">try</span>
<a name="l00561"></a>00561             {
<a name="l00562"></a>00562                 <span class="comment">//System.out.println("sleeping");</span>
<a name="l00563"></a>00563                 <span class="keywordtype">int</span> latency = 200;  <span class="comment">//mS</span>
<a name="l00564"></a>00564 
<a name="l00565"></a>00565                 <span class="comment">// for pauses between plots</span>
<a name="l00566"></a>00566                 <span class="keywordflow">if</span> (slowPlay)
<a name="l00567"></a>00567                 {
<a name="l00568"></a>00568                     latency = 3000;  <span class="comment">//mS</span>
<a name="l00569"></a>00569                 }
<a name="l00570"></a>00570                 Thread.sleep(latency);
<a name="l00571"></a>00571             }
<a name="l00572"></a>00572             <span class="keywordflow">catch</span> (InterruptedException e)
<a name="l00573"></a>00573             {
<a name="l00574"></a>00574                 <span class="comment">// Interrupt may be thrown manually by stop()</span>
<a name="l00575"></a>00575             }
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577 
<a name="l00583"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#ae884fea50fe902b588f83f54c9ca41d">00583</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#ae884fea50fe902b588f83f54c9ca41d">addPixelRowToImage</a>(<span class="keywordtype">int</span>[] pixrow)
<a name="l00584"></a>00584         {
<a name="l00585"></a>00585             <span class="comment">// shift orig buff down by one pixel</span>
<a name="l00586"></a>00586             aftOpShift1LineDown.filter(origBuffImage, shiftedBuffImage);
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="comment">// add in new line at the top</span>
<a name="l00589"></a>00589             <span class="keywordtype">int</span> nrows = 1;
<a name="l00590"></a>00590             shiftedBuffImage.getRaster().setPixels(0, 0, width, nrows, pixrow);
<a name="l00591"></a>00591 
<a name="l00592"></a>00592             <span class="comment">// copy shifted image back to orig</span>
<a name="l00593"></a>00593             aftOpCopy.filter(shiftedBuffImage, origBuffImage);
<a name="l00594"></a>00594 
<a name="l00595"></a>00595             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#4411b12968c2bd45d263fdb4bafef95f">redrawImage</a>();
<a name="l00596"></a>00596         }
<a name="l00597"></a>00597 
<a name="l00601"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#16ea24fcacfb85f1bff116ccfc85a05b">00601</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#16ea24fcacfb85f1bff116ccfc85a05b">clearPlot</a>()
<a name="l00602"></a>00602         {
<a name="l00603"></a>00603             <span class="keywordtype">int</span> datasetIndex = 0;
<a name="l00604"></a>00604             readoutPlot.clear(datasetIndex);
<a name="l00605"></a>00605         }
<a name="l00606"></a>00606 
<a name="l00613"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#155b3ecabfd2013d54f812a4f355cd16">00613</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#155b3ecabfd2013d54f812a4f355cd16">updateDisplayHeaders</a>(<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html">Baseline</a> baseline)
<a name="l00614"></a>00614         {
<a name="l00615"></a>00615 
<a name="l00616"></a>00616             DecimalFormat rfCenterFreqFormatter = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">"0000.000000 MHz  "</span>);
<a name="l00617"></a>00617             DecimalFormat bandwidthFormatter = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">"0.00 MHz  "</span>);
<a name="l00618"></a>00618             DecimalFormat halfFrameFormatter = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">"0000  "</span>);
<a name="l00619"></a>00619 
<a name="l00620"></a>00620             rfCenterFreqValueLabel.setText(
<a name="l00621"></a>00621                     rfCenterFreqFormatter.format(baseline.rfCenterFrequency));
<a name="l00622"></a>00622             bandwidthValueLabel.setText(
<a name="l00623"></a>00623                     bandwidthFormatter.format(baseline.bandwidth));
<a name="l00624"></a>00624             halfFrameNumberValueLabel.setText(
<a name="l00625"></a>00625                     halfFrameFormatter.format(baseline.halfFrameNumber));
<a name="l00626"></a>00626             polValueLabel.setText(baseline.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html#cdebd7d36e7c5028f4e85dbc755ed159">getPolAsString</a>() + <span class="stringliteral">"  "</span>);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628         }
<a name="l00629"></a>00629 
<a name="l00633"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#d9250079258736ad340448381207b848">00633</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#d9250079258736ad340448381207b848">resetTimeAvg</a>()
<a name="l00634"></a>00634         {
<a name="l00635"></a>00635             baselineCount = 0;
<a name="l00636"></a>00636 
<a name="l00637"></a>00637             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; accumBaselineValue.length; ++i)
<a name="l00638"></a>00638             {
<a name="l00639"></a>00639                 accumBaselineValue[i] = 0;
<a name="l00640"></a>00640             }
<a name="l00641"></a>00641 
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643 
<a name="l00649"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#60869fda5a378c07cad46d546141a046">00649</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#60869fda5a378c07cad46d546141a046">plotBaseline</a>(<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1Baseline.html">Baseline</a> baseline)
<a name="l00650"></a>00650         {
<a name="l00651"></a>00651             <span class="keywordtype">int</span> datasetIndex = 0;
<a name="l00652"></a>00652             <span class="keywordtype">double</span> xvalue;
<a name="l00653"></a>00653             <span class="keywordtype">double</span> yvalue;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#16ea24fcacfb85f1bff116ccfc85a05b">clearPlot</a>();
<a name="l00656"></a>00656 
<a name="l00657"></a>00657             <span class="comment">// accumulate values for time average</span>
<a name="l00658"></a>00658             baselineCount++;
<a name="l00659"></a>00659             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; baseline.baselineValue.length; ++i)
<a name="l00660"></a>00660             {
<a name="l00661"></a>00661                 accumBaselineValue[i] += baseline.baselineValue[i];
<a name="l00662"></a>00662             }
<a name="l00663"></a>00663 
<a name="l00664"></a>00664             <span class="comment">// go through baseline data array &amp; plot all the points</span>
<a name="l00665"></a>00665             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; baseline.baselineValue.length; ++i)
<a name="l00666"></a>00666             {
<a name="l00667"></a>00667                 xvalue = i;  <span class="comment">// use index for now</span>
<a name="l00668"></a>00668 
<a name="l00669"></a>00669                 <span class="keywordflow">if</span> (useTimeAvg)
<a name="l00670"></a>00670                 {
<a name="l00671"></a>00671                     yvalue = accumBaselineValue[i] / baselineCount;
<a name="l00672"></a>00672                 }
<a name="l00673"></a>00673                 <span class="keywordflow">else</span> 
<a name="l00674"></a>00674                 {
<a name="l00675"></a>00675                     yvalue = baseline.baselineValue[i];
<a name="l00676"></a>00676                 }
<a name="l00677"></a>00677                 <span class="comment">//Add the point. Last arg "true" means connect</span>
<a name="l00678"></a>00678                 readoutPlot.addPoint(datasetIndex, xvalue, yvalue, <span class="keyword">true</span>);
<a name="l00679"></a>00679             }
<a name="l00680"></a>00680 
<a name="l00681"></a>00681             <span class="comment">// add a final point at the end with a zero Y value,</span>
<a name="l00682"></a>00682             <span class="comment">// to force the y axis to display full scale</span>
<a name="l00683"></a>00683             xvalue = baseline.baselineValue.length;
<a name="l00684"></a>00684             yvalue = 0;
<a name="l00685"></a>00685             <span class="comment">//JR - April 14, 2010, changed conected (last argulement) to</span>
<a name="l00686"></a>00686             <span class="comment">//false. This makes the last point not draw a line that drops</span>
<a name="l00687"></a>00687             <span class="comment">//off to zero.</span>
<a name="l00688"></a>00688             readoutPlot.addPoint(datasetIndex, xvalue, yvalue, <span class="keyword">false</span>);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690             <span class="comment">// properly scale the plot to fit this data</span>
<a name="l00691"></a>00691             readoutPlot.fillPlot();  
<a name="l00692"></a>00692 
<a name="l00693"></a>00693         }
<a name="l00694"></a>00694 
<a name="l00698"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#ba0b4210438aa2ee7c493126c477131c">00698</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#ba0b4210438aa2ee7c493126c477131c">run</a>()
<a name="l00699"></a>00699         {
<a name="l00700"></a>00700 
<a name="l00701"></a>00701             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#e040f009d179fd6a380eeb936d36b1ec">openFile</a>();
<a name="l00702"></a>00702 
<a name="l00703"></a>00703             <span class="keywordtype">int</span> rowSize = width;
<a name="l00704"></a>00704             <span class="keywordtype">int</span> count = 0;
<a name="l00705"></a>00705             <span class="keywordtype">int</span>[] pixbuff = <span class="keyword">new</span> <span class="keywordtype">int</span>[rowSize];
<a name="l00706"></a>00706 
<a name="l00707"></a>00707             <span class="keywordtype">boolean</span> continueRunning = <span class="keyword">true</span>;
<a name="l00708"></a>00708             <span class="keywordtype">boolean</span> waitingForHeader = <span class="keyword">true</span>;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710             <span class="keywordflow">while</span> (continueRunning)
<a name="l00711"></a>00711             {
<a name="l00712"></a>00712 
<a name="l00713"></a>00713                 <span class="keywordflow">try</span>
<a name="l00714"></a>00714                 {
<a name="l00715"></a>00715 
<a name="l00716"></a>00716                     <span class="comment">// Try to read data, but wait until at least the</span>
<a name="l00717"></a>00717                     <span class="comment">// minimum acceptable record size is available to</span>
<a name="l00718"></a>00718                     <span class="comment">// avoid hitting EOF prematurely.  Ie, try</span>
<a name="l00719"></a>00719                     <span class="comment">// to get the EOF exception only when the file is</span>
<a name="l00720"></a>00720                     <span class="comment">// truncated, and not just because a partial record </span>
<a name="l00721"></a>00721                     <span class="comment">// has been appended to the file. </span>
<a name="l00722"></a>00722 
<a name="l00723"></a>00723                     <span class="comment">// Because the body of the baseline record is of variable </span>
<a name="l00724"></a>00724                     <span class="comment">// length, first wait for a header, then wait for the</span>
<a name="l00725"></a>00725                     <span class="comment">// length of array defined in the header.</span>
<a name="l00726"></a>00726 
<a name="l00727"></a>00727                     <span class="keywordflow">while</span> (in != null &amp;&amp; (in.available() &gt; 0))
<a name="l00728"></a>00728                     {
<a name="l00729"></a>00729 
<a name="l00730"></a>00730                         <span class="keywordflow">if</span> (waitingForHeader)
<a name="l00731"></a>00731                         {
<a name="l00732"></a>00732                             <span class="keywordflow">if</span> (in.available() &gt;= baseline.getHeaderSizeBytes())
<a name="l00733"></a>00733                             {
<a name="l00734"></a>00734                                 baseline.readHeader(in);
<a name="l00735"></a>00735                                 baseline.printHeader();
<a name="l00736"></a>00736                                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#155b3ecabfd2013d54f812a4f355cd16">updateDisplayHeaders</a>(baseline);
<a name="l00737"></a>00737 
<a name="l00738"></a>00738                                 waitingForHeader = <span class="keyword">false</span>;
<a name="l00739"></a>00739                             }
<a name="l00740"></a>00740                         }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742                         <span class="keywordflow">if</span> (!waitingForHeader)
<a name="l00743"></a>00743                         {
<a name="l00744"></a>00744                             <span class="keywordflow">if</span> (in.available() &gt;= baseline.getBodySizeBytes())
<a name="l00745"></a>00745                             {
<a name="l00746"></a>00746                                 baseline.readBody(in);
<a name="l00747"></a>00747                                 baseline.printBody();
<a name="l00748"></a>00748                                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#60869fda5a378c07cad46d546141a046">plotBaseline</a>(baseline);
<a name="l00749"></a>00749 
<a name="l00750"></a>00750                                 waitingForHeader = <span class="keyword">true</span>;
<a name="l00751"></a>00751                             }
<a name="l00752"></a>00752                         }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754                         <span class="comment">// pause between reads</span>
<a name="l00755"></a>00755                         <span class="keywordflow">if</span> (slowPlay)
<a name="l00756"></a>00756                         {
<a name="l00757"></a>00757                             <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#cfc93b4b38b10b3ec52a6e72d625c26c">sleep</a>();
<a name="l00758"></a>00758                         }
<a name="l00759"></a>00759 
<a name="l00760"></a>00760                     }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762                     <span class="comment">// Detecting file truncation in this</span>
<a name="l00763"></a>00763                     <span class="comment">// way is not documented but seems to work.</span>
<a name="l00768"></a>00768 <span class="comment"></span>                    <span class="keywordflow">if</span> (in != null &amp;&amp; in.available() &lt; 0)
<a name="l00769"></a>00769                     {
<a name="l00770"></a>00770                         <span class="keywordflow">throw</span> <span class="keyword">new</span> EOFException();
<a name="l00771"></a>00771                     }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773                 }
<a name="l00774"></a>00774                 <span class="keywordflow">catch</span> (EOFException e)
<a name="l00775"></a>00775                 {
<a name="l00776"></a>00776                     <span class="comment">// Input file was truncated.  </span>
<a name="l00777"></a>00777                     <span class="comment">// Reopen file to start over.</span>
<a name="l00778"></a>00778 
<a name="l00779"></a>00779                     <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#e040f009d179fd6a380eeb936d36b1ec">openFile</a>();
<a name="l00780"></a>00780 
<a name="l00781"></a>00781                 }
<a name="l00782"></a>00782                 <span class="keywordflow">catch</span> (IOException e)
<a name="l00783"></a>00783                 {
<a name="l00784"></a>00784                     System.out.println(e);
<a name="l00785"></a>00785 
<a name="l00786"></a>00786                     <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#e040f009d179fd6a380eeb936d36b1ec">openFile</a>();
<a name="l00787"></a>00787                 }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789                 <span class="comment">// wait for more data to appear</span>
<a name="l00790"></a>00790                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html#cfc93b4b38b10b3ec52a6e72d625c26c">sleep</a>();
<a name="l00791"></a>00791             }
<a name="l00792"></a>00792         }
<a name="l00793"></a>00793     }
<a name="l00794"></a>00794 
<a name="l00798"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#533f81ac9b1867eda87cfc39b6cb14ef">00798</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#533f81ac9b1867eda87cfc39b6cb14ef">scaleImage</a>()
<a name="l00799"></a>00799     {
<a name="l00800"></a>00800         <span class="comment">// apply scale &amp; offset to pixels</span>
<a name="l00801"></a>00801         RescaleOp rescaleOp = <span class="keyword">new</span> RescaleOp(pixelScaleFactor, pixelOffsetFactor, null);
<a name="l00802"></a>00802         rescaleOp.filter(origBuffImage, scaledBuffImage);
<a name="l00803"></a>00803     }
<a name="l00804"></a>00804 
<a name="l00808"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#4411b12968c2bd45d263fdb4bafef95f">00808</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#4411b12968c2bd45d263fdb4bafef95f">redrawImage</a>()
<a name="l00809"></a>00809     {
<a name="l00810"></a>00810         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#533f81ac9b1867eda87cfc39b6cb14ef">scaleImage</a>();
<a name="l00811"></a>00811 
<a name="l00812"></a>00812         imagePanel.repaint();
<a name="l00813"></a>00813     }
<a name="l00814"></a>00814 
<a name="l00818"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html">00818</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html">OpenFileListener</a> <span class="keyword">implements</span> ActionListener
<a name="l00819"></a>00819     {
<a name="l00820"></a>00820         JFileChooser fc;
<a name="l00821"></a>00821 
<a name="l00827"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html#0c09779c5b3fcddd0392fa406cb2f401">00827</a>         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html#0c09779c5b3fcddd0392fa406cb2f401">OpenFileListener</a>(JFileChooser fc)
<a name="l00828"></a>00828         {
<a name="l00829"></a>00829             this.fc = fc;
<a name="l00830"></a>00830         }
<a name="l00831"></a>00831 
<a name="l00837"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html#f74ec93c8ee6edfc9815c012ca2e49b8">00837</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html#f74ec93c8ee6edfc9815c012ca2e49b8">actionPerformed</a>(ActionEvent e)
<a name="l00838"></a>00838         {
<a name="l00839"></a>00839 
<a name="l00840"></a>00840             <span class="keywordtype">int</span> returnVal = fc.showOpenDialog(<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html">BaselineDisplay</a>.this);
<a name="l00841"></a>00841 
<a name="l00842"></a>00842             <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION)
<a name="l00843"></a>00843             {
<a name="l00844"></a>00844 
<a name="l00845"></a>00845                 File file = fc.getSelectedFile();
<a name="l00846"></a>00846                 String fullpath = file.getAbsolutePath();
<a name="l00847"></a>00847                 fileScanner.openNewFile(fullpath);
<a name="l00848"></a>00848                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#6734ca48c503ac4f94548156d17d627b">changeDisplayedFilename</a>(file.getName());
<a name="l00849"></a>00849             }
<a name="l00850"></a>00850             <span class="keywordflow">else</span>
<a name="l00851"></a>00851             {
<a name="l00852"></a>00852                 <span class="comment">//System.out.println("Open command cancelled by user.");</span>
<a name="l00853"></a>00853             }
<a name="l00854"></a>00854         }
<a name="l00855"></a>00855     }
<a name="l00856"></a>00856 
<a name="l00857"></a>00857 
<a name="l00861"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html">00861</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html">SaveAsJpegListener</a> <span class="keyword">implements</span> ActionListener
<a name="l00862"></a>00862     {
<a name="l00863"></a>00863 
<a name="l00864"></a>00864         JFileChooser fc;
<a name="l00865"></a>00865 
<a name="l00871"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html#d7f80035cbb412afa2c5a4d77182a1f1">00871</a>         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html#d7f80035cbb412afa2c5a4d77182a1f1">SaveAsJpegListener</a>(JFileChooser fc)
<a name="l00872"></a>00872         {
<a name="l00873"></a>00873             this.fc = fc;
<a name="l00874"></a>00874         }
<a name="l00875"></a>00875 
<a name="l00881"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html#feba3400cdeb00ed5fb27e550dbf8cd8">00881</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html#feba3400cdeb00ed5fb27e550dbf8cd8">actionPerformed</a>(ActionEvent e)
<a name="l00882"></a>00882         {
<a name="l00883"></a>00883 
<a name="l00884"></a>00884             <span class="keywordtype">int</span> returnVal = fc.showSaveDialog(<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html">BaselineDisplay</a>.this);
<a name="l00885"></a>00885 
<a name="l00886"></a>00886             <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION)
<a name="l00887"></a>00887             {
<a name="l00888"></a>00888 
<a name="l00889"></a>00889                 File file = fc.getSelectedFile();
<a name="l00890"></a>00890                 String absoluteFilename = file.getAbsolutePath();
<a name="l00891"></a>00891 
<a name="l00892"></a>00892                 <span class="keywordflow">try</span>
<a name="l00893"></a>00893                 {
<a name="l00894"></a>00894                     File jpegFile = <span class="keyword">new</span> File(absoluteFilename);
<a name="l00895"></a>00895                     ImageIO.write(scaledBuffImage, <span class="stringliteral">"jpg"</span>, jpegFile);
<a name="l00896"></a>00896                 }
<a name="l00897"></a>00897                 <span class="keywordflow">catch</span> (IOException ioe)
<a name="l00898"></a>00898                 {
<a name="l00899"></a>00899                     System.out.println(ioe);
<a name="l00900"></a>00900                 }
<a name="l00901"></a>00901             }
<a name="l00902"></a>00902             <span class="keywordflow">else</span>
<a name="l00903"></a>00903             {
<a name="l00904"></a>00904                 <span class="comment">//System.out.println("Open command cancelled by user.");</span>
<a name="l00905"></a>00905             }
<a name="l00906"></a>00906         }
<a name="l00907"></a>00907     }
<a name="l00908"></a>00908 
<a name="l00912"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1PrintListener.html">00912</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1PrintListener.html">PrintListener</a> <span class="keyword">implements</span> ActionListener
<a name="l00913"></a>00913     {
<a name="l00914"></a>00914 
<a name="l00920"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1PrintListener.html#d645a2a6385a9a077d80e4c963d01452">00920</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1PrintListener.html#d645a2a6385a9a077d80e4c963d01452">actionPerformed</a>(ActionEvent e)
<a name="l00921"></a>00921         {
<a name="l00922"></a>00922             PageFormat pageFormat = printJob.defaultPage();
<a name="l00923"></a>00923             pageFormat.setOrientation(PageFormat.LANDSCAPE);
<a name="l00924"></a>00924             printJob.setPrintable(imagePanel, pageFormat);
<a name="l00925"></a>00925 
<a name="l00926"></a>00926             <span class="keywordflow">if</span> (printJob.printDialog())
<a name="l00927"></a>00927             {
<a name="l00928"></a>00928                 <span class="keywordflow">try</span>
<a name="l00929"></a>00929                 {
<a name="l00930"></a>00930                     printJob.print();  
<a name="l00931"></a>00931                 }
<a name="l00932"></a>00932                 <span class="keywordflow">catch</span> (Exception ex)
<a name="l00933"></a>00933                 {
<a name="l00934"></a>00934                     ex.printStackTrace();
<a name="l00935"></a>00935                 }
<a name="l00936"></a>00936             }
<a name="l00937"></a>00937         }
<a name="l00938"></a>00938     }
<a name="l00939"></a>00939 
<a name="l00944"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html">00944</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html">CustomFilenameFilter</a> <span class="keyword">extends</span> javax.swing.filechooser.FileFilter
<a name="l00945"></a>00945     {
<a name="l00946"></a>00946 
<a name="l00947"></a>00947         String fileExtension;    <span class="comment">// eg, "jpeg"</span>
<a name="l00948"></a>00948         String fileDescription;  <span class="comment">// eg, "*.jpeg (jpeg images)</span>
<a name="l00949"></a>00949 
<a name="l00956"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#fb3d99612ded931319eadd2a53ab39ed">00956</a>         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#fb3d99612ded931319eadd2a53ab39ed">CustomFilenameFilter</a>(String fileExtension, String fileDescription)
<a name="l00957"></a>00957         {
<a name="l00958"></a>00958             this.fileExtension = fileExtension;
<a name="l00959"></a>00959             this.fileDescription = fileDescription;
<a name="l00960"></a>00960         }
<a name="l00961"></a>00961 
<a name="l00967"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#2893b51d74867e3fb1fbd370e181aa49">00967</a>         <span class="keyword">public</span> String <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#2893b51d74867e3fb1fbd370e181aa49">getExtension</a>(File f)
<a name="l00968"></a>00968         {
<a name="l00969"></a>00969             String ext = null;
<a name="l00970"></a>00970             String s = f.getName();
<a name="l00971"></a>00971             <span class="keywordtype">int</span> i = s.lastIndexOf(<span class="charliteral">'.'</span>);
<a name="l00972"></a>00972 
<a name="l00973"></a>00973             <span class="keywordflow">if</span> (i &gt; 0 &amp;&amp;  i &lt; s.length() - 1)
<a name="l00974"></a>00974             {
<a name="l00975"></a>00975                 ext = s.substring(i+1).toLowerCase();
<a name="l00976"></a>00976             }
<a name="l00977"></a>00977             <span class="keywordflow">return</span> ext;
<a name="l00978"></a>00978         }
<a name="l00979"></a>00979 
<a name="l00985"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#b14705261c2a60368fce02285c0db994">00985</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#b14705261c2a60368fce02285c0db994">accept</a>(File f)
<a name="l00986"></a>00986         {
<a name="l00987"></a>00987 
<a name="l00988"></a>00988 
<a name="l00989"></a>00989             <span class="keywordflow">if</span> (f.isDirectory())
<a name="l00990"></a>00990             {
<a name="l00991"></a>00991                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00992"></a>00992             }
<a name="l00993"></a>00993 
<a name="l00994"></a>00994             String extension = <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#2893b51d74867e3fb1fbd370e181aa49">getExtension</a>(f);
<a name="l00995"></a>00995             <span class="keywordflow">if</span> (extension != null)
<a name="l00996"></a>00996             {
<a name="l00997"></a>00997                 <span class="keywordflow">if</span> (extension.equals(fileExtension))
<a name="l00998"></a>00998                 {
<a name="l00999"></a>00999                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01000"></a>01000                 }
<a name="l01001"></a>01001                 <span class="keywordflow">else</span>
<a name="l01002"></a>01002                 {
<a name="l01003"></a>01003                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01004"></a>01004                 }
<a name="l01005"></a>01005             }
<a name="l01006"></a>01006 
<a name="l01007"></a>01007             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01008"></a>01008         }
<a name="l01009"></a>01009 
<a name="l01015"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#8b776c7f215beaec45444341711ebb3d">01015</a>         <span class="keyword">public</span> String <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html#8b776c7f215beaec45444341711ebb3d">getDescription</a>()
<a name="l01016"></a>01016         {
<a name="l01017"></a>01017             <span class="keywordflow">return</span> fileDescription;
<a name="l01018"></a>01018         }
<a name="l01019"></a>01019     }
<a name="l01020"></a>01020 
<a name="l01024"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OffsetSliderListener.html">01024</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OffsetSliderListener.html">OffsetSliderListener</a> <span class="keyword">implements</span> ChangeListener
<a name="l01025"></a>01025     {
<a name="l01031"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OffsetSliderListener.html#675848a71e3c305eda1fb233319851a6">01031</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OffsetSliderListener.html#675848a71e3c305eda1fb233319851a6">stateChanged</a>(ChangeEvent e)
<a name="l01032"></a>01032         {
<a name="l01033"></a>01033             JSlider source = (JSlider)e.getSource();
<a name="l01034"></a>01034             <span class="keywordflow">if</span> (! source.getValueIsAdjusting())
<a name="l01035"></a>01035             {
<a name="l01036"></a>01036                 <span class="keywordtype">float</span> value = (float)source.getValue();
<a name="l01037"></a>01037                 pixelOffsetFactor = value;
<a name="l01038"></a>01038                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#4411b12968c2bd45d263fdb4bafef95f">redrawImage</a>();
<a name="l01039"></a>01039             }    
<a name="l01040"></a>01040         }
<a name="l01041"></a>01041     }
<a name="l01042"></a>01042 
<a name="l01046"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ScaleSliderListener.html">01046</a>     <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ScaleSliderListener.html">ScaleSliderListener</a> <span class="keyword">implements</span> ChangeListener
<a name="l01047"></a>01047     {
<a name="l01053"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ScaleSliderListener.html#f4b616fc2f323f4f90fc421380472cf9">01053</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ScaleSliderListener.html#f4b616fc2f323f4f90fc421380472cf9">stateChanged</a>(ChangeEvent e)
<a name="l01054"></a>01054         {
<a name="l01055"></a>01055             JSlider source = (JSlider)e.getSource();
<a name="l01056"></a>01056             <span class="keywordflow">if</span> (! source.getValueIsAdjusting())
<a name="l01057"></a>01057             {
<a name="l01058"></a>01058                 <span class="keywordtype">float</span> value = (float)source.getValue() / 100;
<a name="l01059"></a>01059                 pixelScaleFactor = value;
<a name="l01060"></a>01060                 <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#4411b12968c2bd45d263fdb4bafef95f">redrawImage</a>();
<a name="l01061"></a>01061             }
<a name="l01062"></a>01062         }
<a name="l01063"></a>01063     }
<a name="l01064"></a>01064 
<a name="l01070"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#6734ca48c503ac4f94548156d17d627b">01070</a>     <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#6734ca48c503ac4f94548156d17d627b">changeDisplayedFilename</a>(String newname)
<a name="l01071"></a>01071     {
<a name="l01072"></a>01072         currentFileText.setText(newname);
<a name="l01073"></a>01073 
<a name="l01074"></a>01074         readoutPlot.setTitle(newname);
<a name="l01075"></a>01075     }
<a name="l01076"></a>01076 
<a name="l01083"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#8aca01f14b46d841c84a4bc846d6c8f1">01083</a>     <span class="keyword">private</span> String <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#8aca01f14b46d841c84a4bc846d6c8f1">getArchiveDir</a>()
<a name="l01084"></a>01084     {
<a name="l01085"></a>01085         <a class="code" href="classopensonata_1_1dataDisplays_1_1EnvReader.html">EnvReader</a> env = <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1EnvReader.html">EnvReader</a>();
<a name="l01086"></a>01086         String archiveDir = env.<a class="code" href="classopensonata_1_1dataDisplays_1_1EnvReader.html#868b79b0cef54eb21702eca1033e693c">getEnvVar</a>(<span class="stringliteral">"SSE_ARCHIVE"</span>); 
<a name="l01087"></a>01087         <span class="keywordflow">if</span> (archiveDir == null)
<a name="l01088"></a>01088         {
<a name="l01089"></a>01089             archiveDir = env.<a class="code" href="classopensonata_1_1dataDisplays_1_1EnvReader.html#868b79b0cef54eb21702eca1033e693c">getEnvVar</a>(<span class="stringliteral">"HOME"</span>) + <span class="stringliteral">"/sse_archive"</span>; 
<a name="l01090"></a>01090         }
<a name="l01091"></a>01091         <span class="keywordflow">return</span> archiveDir;
<a name="l01092"></a>01092     }
<a name="l01093"></a>01093 
<a name="l01097"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#080c22e5648fe8d40ba10bd3943958cc">01097</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#080c22e5648fe8d40ba10bd3943958cc">init</a>()
<a name="l01098"></a>01098     {
<a name="l01099"></a>01099 
<a name="l01100"></a>01100         readoutPlot = <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1ReadoutPlot.html">ReadoutPlot</a>();
<a name="l01101"></a>01101         readoutPlot.<a class="code" href="classopensonata_1_1dataDisplays_1_1ReadoutPlot.html#d670e5bc4d2c16b3c39543aa78f47a9d">addReadoutListener</a>(<span class="keyword">this</span>);
<a name="l01102"></a>01102         readoutPlot.setXLabel(<span class="stringliteral">"Subband Number"</span>);
<a name="l01103"></a>01103         readoutPlot.setYLabel(<span class="stringliteral">"Power"</span>);
<a name="l01104"></a>01104         readoutPlot.setCursor(<span class="keyword">new</span> Cursor(Cursor.CROSSHAIR_CURSOR));
<a name="l01105"></a>01105 
<a name="l01106"></a>01106         JPanel controlPanel = <span class="keyword">new</span> JPanel();
<a name="l01107"></a>01107 
<a name="l01108"></a>01108         JMenuBar menuBar = <span class="keyword">new</span> JMenuBar();
<a name="l01109"></a>01109         setJMenuBar(menuBar);
<a name="l01110"></a>01110 
<a name="l01111"></a>01111         JMenu fileMenu = <span class="keyword">new</span> JMenu(<span class="stringliteral">"File"</span>);
<a name="l01112"></a>01112         menuBar.add(fileMenu);
<a name="l01113"></a>01113 
<a name="l01114"></a>01114 
<a name="l01115"></a>01115         JFileChooser openFileChooser = <span class="keyword">new</span> JFileChooser();
<a name="l01116"></a>01116 
<a name="l01117"></a>01117         <span class="comment">// get the location of the confirmation data in the</span>
<a name="l01118"></a>01118         <span class="comment">// archive data directory</span>
<a name="l01119"></a>01119         String confirmDataDir = <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#8aca01f14b46d841c84a4bc846d6c8f1">getArchiveDir</a>() + <span class="stringliteral">"/confirmdata"</span>;
<a name="l01120"></a>01120         openFileChooser.setCurrentDirectory(<span class="keyword">new</span> File(confirmDataDir));
<a name="l01121"></a>01121         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html">CustomFilenameFilter</a> baselineFilenameFilter = 
<a name="l01122"></a>01122             <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html">CustomFilenameFilter</a>(<span class="stringliteral">"baseline"</span>, <span class="stringliteral">"*.baseline (SonATA binary baselines)"</span>);
<a name="l01123"></a>01123         openFileChooser.setFileFilter(baselineFilenameFilter);
<a name="l01124"></a>01124 
<a name="l01125"></a>01125         JMenuItem openFileMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Open File ..."</span>);
<a name="l01126"></a>01126         fileMenu.add(openFileMenuItem);
<a name="l01127"></a>01127         openFileMenuItem.addActionListener(<span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OpenFileListener.html">OpenFileListener</a>(openFileChooser));
<a name="l01128"></a>01128 
<a name="l01132"></a>01132         <span class="keyword">class </span>RereadListener <span class="keyword">implements</span> ActionListener
<a name="l01133"></a>01133         {
<a name="l01139"></a>01139             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)
<a name="l01140"></a>01140             {
<a name="l01141"></a>01141                 fileScanner.openFile();
<a name="l01142"></a>01142             }
<a name="l01143"></a>01143         }
<a name="l01144"></a>01144 
<a name="l01145"></a>01145         JMenuItem rereadFileMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Reread File"</span>);
<a name="l01146"></a>01146         fileMenu.add(rereadFileMenuItem);
<a name="l01147"></a>01147         rereadFileMenuItem.addActionListener(<span class="keyword">new</span> RereadListener());
<a name="l01148"></a>01148 
<a name="l01149"></a>01149 
<a name="l01150"></a>01150         JMenuItem printFileMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Print ..."</span>);
<a name="l01151"></a>01151         printFileMenuItem.addActionListener(<span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1PrintListener.html">PrintListener</a>());
<a name="l01152"></a>01152         printJob = PrinterJob.getPrinterJob();
<a name="l01153"></a>01153 
<a name="l01154"></a>01154 
<a name="l01155"></a>01155         JMenuItem saveAsJpegFileMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Save As JPeg ..."</span>);
<a name="l01156"></a>01156         JFileChooser jpegFileChooser = <span class="keyword">new</span> JFileChooser();
<a name="l01157"></a>01157         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html">CustomFilenameFilter</a> jpegFilenameFilter = 
<a name="l01158"></a>01158             <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1CustomFilenameFilter.html">CustomFilenameFilter</a>(<span class="stringliteral">"jpeg"</span>, <span class="stringliteral">"*.jpeg (jpeg images)"</span>);
<a name="l01159"></a>01159         jpegFileChooser.setFileFilter(jpegFilenameFilter);
<a name="l01160"></a>01160         jpegFileChooser.setDialogTitle(<span class="stringliteral">"Save Display as a JPEG image..."</span>);
<a name="l01161"></a>01161         jpegFileChooser.setDialogType(JFileChooser.SAVE_DIALOG);
<a name="l01162"></a>01162         saveAsJpegFileMenuItem.addActionListener(<span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1SaveAsJpegListener.html">SaveAsJpegListener</a>(jpegFileChooser));
<a name="l01163"></a>01163         <span class="comment">// TBD: this is not yet fully implemented</span>
<a name="l01164"></a>01164         <span class="comment">//fileMenu.add(saveAsJpegFileMenuItem);</span>
<a name="l01165"></a>01165 
<a name="l01169"></a>01169         <span class="keyword">class </span>ExitListener <span class="keyword">implements</span> ActionListener
<a name="l01170"></a>01170         {
<a name="l01177"></a>01177             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)
<a name="l01178"></a>01178             {
<a name="l01179"></a>01179                 System.exit(0);
<a name="l01180"></a>01180             }
<a name="l01181"></a>01181         }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183         JMenuItem exitMenuItem = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Exit"</span>);
<a name="l01184"></a>01184         exitMenuItem.addActionListener(<span class="keyword">new</span> ExitListener());
<a name="l01185"></a>01185         fileMenu.addSeparator();
<a name="l01186"></a>01186         fileMenu.add(exitMenuItem);
<a name="l01187"></a>01187 
<a name="l01188"></a>01188         JMenu viewMenu = <span class="keyword">new</span> JMenu(<span class="stringliteral">"View"</span>);
<a name="l01189"></a>01189         menuBar.add(viewMenu);
<a name="l01190"></a>01190 
<a name="l01194"></a>01194         <span class="keyword">class </span>ClearPlotListener <span class="keyword">implements</span> ActionListener
<a name="l01195"></a>01195         {
<a name="l01202"></a>01202             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)
<a name="l01203"></a>01203             {
<a name="l01204"></a>01204                 fileScanner.clearPlot();  
<a name="l01205"></a>01205             }
<a name="l01206"></a>01206         }
<a name="l01207"></a>01207 
<a name="l01208"></a>01208         JMenuItem clearPlotMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Clear Plot"</span>);
<a name="l01209"></a>01209         viewMenu.add(clearPlotMenuItem);
<a name="l01210"></a>01210         clearPlotMenuItem.addActionListener(<span class="keyword">new</span> ClearPlotListener());
<a name="l01211"></a>01211 
<a name="l01215"></a>01215         <span class="keyword">class </span>RescalePlotListener <span class="keyword">implements</span> ActionListener
<a name="l01216"></a>01216         {
<a name="l01223"></a>01223             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)
<a name="l01224"></a>01224             {
<a name="l01225"></a>01225                 <span class="comment">// restore the plot to normal (unzoomed) scale</span>
<a name="l01226"></a>01226                 readoutPlot.fillPlot();
<a name="l01227"></a>01227             }
<a name="l01228"></a>01228         }
<a name="l01229"></a>01229 
<a name="l01230"></a>01230         JMenuItem rescalePlotMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Rescale Plot"</span>);
<a name="l01231"></a>01231         viewMenu.add(rescalePlotMenuItem);
<a name="l01232"></a>01232         rescalePlotMenuItem.addActionListener(<span class="keyword">new</span> RescalePlotListener());
<a name="l01233"></a>01233 
<a name="l01234"></a>01234         JSlider contrastSlider = <span class="keyword">new</span> JSlider(JSlider.HORIZONTAL, 0, 1000, 100);
<a name="l01235"></a>01235         contrastSlider.setBorder(<span class="keyword">new</span> TitledBorder(<span class="stringliteral">"Pixel Multiplier %"</span>));
<a name="l01236"></a>01236         contrastSlider.setMajorTickSpacing(200);
<a name="l01237"></a>01237         contrastSlider.setPaintTicks(<span class="keyword">true</span>);
<a name="l01238"></a>01238         contrastSlider.setPaintLabels(<span class="keyword">true</span>);
<a name="l01239"></a>01239         contrastSlider.addChangeListener(<span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ScaleSliderListener.html">ScaleSliderListener</a>());
<a name="l01240"></a>01240         controlPanel.add(contrastSlider);
<a name="l01241"></a>01241 
<a name="l01242"></a>01242 
<a name="l01243"></a>01243         JSlider offsetSlider = <span class="keyword">new</span> JSlider(JSlider.HORIZONTAL, -100, 100, 0);
<a name="l01244"></a>01244         offsetSlider.setBorder(<span class="keyword">new</span> TitledBorder(<span class="stringliteral">"Pixel Offset"</span>));
<a name="l01245"></a>01245         offsetSlider.setMajorTickSpacing(50);
<a name="l01246"></a>01246         offsetSlider.setPaintTicks(<span class="keyword">true</span>);
<a name="l01247"></a>01247         offsetSlider.setPaintLabels(<span class="keyword">true</span>);
<a name="l01248"></a>01248         offsetSlider.addChangeListener(<span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1OffsetSliderListener.html">OffsetSliderListener</a>());
<a name="l01249"></a>01249         controlPanel.add(offsetSlider);
<a name="l01250"></a>01250 
<a name="l01251"></a>01251         imagePanel = <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html">ImagePanel</a>();
<a name="l01252"></a>01252         imagePanel.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1ImagePanel.html#8ef836a3754b625ec72d868deeb8ab92">setImage</a>(scaledBuffImage);
<a name="l01253"></a>01253         imagePanel.setPreferredSize(<span class="keyword">new</span> Dimension(width, height));
<a name="l01254"></a>01254         imagePanel.setBorder(BorderFactory.createLineBorder(Color.blue));
<a name="l01255"></a>01255 
<a name="l01256"></a>01256         JScrollPane scrollPane = <span class="keyword">new</span> JScrollPane(imagePanel);
<a name="l01257"></a>01257 
<a name="l01258"></a>01258 
<a name="l01259"></a>01259         JPanel baselineControlPanel = <span class="keyword">new</span> JPanel();
<a name="l01260"></a>01260         baselineControlPanel.setLayout(<span class="keyword">new</span> BorderLayout());
<a name="l01261"></a>01261 
<a name="l01262"></a>01262         JPanel controlLine1Panel = <span class="keyword">new</span> JPanel();
<a name="l01263"></a>01263         JPanel controlLine2Panel = <span class="keyword">new</span> JPanel();
<a name="l01264"></a>01264         baselineControlPanel.add(BorderLayout.NORTH, controlLine1Panel);
<a name="l01265"></a>01265         baselineControlPanel.add(BorderLayout.CENTER, controlLine2Panel);
<a name="l01266"></a>01266 
<a name="l01267"></a>01267 
<a name="l01268"></a>01268 
<a name="l01272"></a>01272         <span class="keyword">class </span>TimeAvgListener <span class="keyword">implements</span> ItemListener
<a name="l01273"></a>01273         {
<a name="l01280"></a>01280             <span class="keyword">public</span> <span class="keywordtype">void</span> itemStateChanged(ItemEvent e)
<a name="l01281"></a>01281             {
<a name="l01282"></a>01282                 <span class="keywordflow">if</span> (e.getStateChange() == ItemEvent.DESELECTED)
<a name="l01283"></a>01283                 {
<a name="l01284"></a>01284                     useTimeAvg = <span class="keyword">false</span>;
<a name="l01285"></a>01285                 } 
<a name="l01286"></a>01286                 <span class="keywordflow">else</span>
<a name="l01287"></a>01287                 {
<a name="l01288"></a>01288                     useTimeAvg = <span class="keyword">true</span>;
<a name="l01289"></a>01289                 }
<a name="l01290"></a>01290             }
<a name="l01291"></a>01291         }
<a name="l01292"></a>01292         JCheckBox timeAvgCheckBox = <span class="keyword">new</span> JCheckBox(<span class="stringliteral">"Time Avg"</span>, useTimeAvg);
<a name="l01293"></a>01293         timeAvgCheckBox.addItemListener(<span class="keyword">new</span> TimeAvgListener());
<a name="l01294"></a>01294         controlLine1Panel.add(timeAvgCheckBox);
<a name="l01295"></a>01295 
<a name="l01296"></a>01296 
<a name="l01297"></a>01297         <span class="comment">// Pol</span>
<a name="l01298"></a>01298         JLabel polTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"Pol: "</span>);
<a name="l01299"></a>01299         polValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01300"></a>01300         controlLine1Panel.add(polTitleLabel);
<a name="l01301"></a>01301         controlLine1Panel.add(polValueLabel);
<a name="l01302"></a>01302 
<a name="l01303"></a>01303 
<a name="l01304"></a>01304         <span class="comment">// RF center freq</span>
<a name="l01305"></a>01305         JLabel rfCenterFreqTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"Center Freq: "</span>);
<a name="l01306"></a>01306         rfCenterFreqValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01307"></a>01307         controlLine1Panel.add(rfCenterFreqTitleLabel);
<a name="l01308"></a>01308         controlLine1Panel.add(rfCenterFreqValueLabel);
<a name="l01309"></a>01309 
<a name="l01310"></a>01310         <span class="comment">// Bandwidth</span>
<a name="l01311"></a>01311         JLabel bandwidthTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"BW: "</span>);
<a name="l01312"></a>01312         bandwidthValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01313"></a>01313         controlLine1Panel.add(bandwidthTitleLabel);
<a name="l01314"></a>01314         controlLine1Panel.add(bandwidthValueLabel);
<a name="l01315"></a>01315 
<a name="l01316"></a>01316 
<a name="l01317"></a>01317         <span class="comment">// current filename</span>
<a name="l01318"></a>01318         JLabel currentFileLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"File: "</span>);
<a name="l01319"></a>01319         currentFileText = <span class="keyword">new</span> JLabel(<span class="stringliteral">"None            "</span>);
<a name="l01320"></a>01320         controlLine1Panel.add(currentFileLabel);
<a name="l01321"></a>01321         controlLine1Panel.add(currentFileText);
<a name="l01322"></a>01322         <span class="comment">// display filename, last part only</span>
<a name="l01323"></a>01323         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#6734ca48c503ac4f94548156d17d627b">changeDisplayedFilename</a>(<span class="keyword">new</span> File(filename).getName()); 
<a name="l01324"></a>01324 
<a name="l01325"></a>01325 
<a name="l01326"></a>01326         <span class="comment">// half frame number</span>
<a name="l01327"></a>01327         JLabel halfFrameNumberTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"Half Frame #: "</span>);
<a name="l01328"></a>01328         halfFrameNumberValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01329"></a>01329         controlLine2Panel.add(halfFrameNumberTitleLabel);
<a name="l01330"></a>01330         controlLine2Panel.add(halfFrameNumberValueLabel);
<a name="l01331"></a>01331 
<a name="l01332"></a>01332 
<a name="l01333"></a>01333         <span class="comment">// cursor readout values</span>
<a name="l01334"></a>01334         <span class="comment">// subband freq</span>
<a name="l01335"></a>01335         JLabel subbandFreqReadoutTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"Cursor Freq: "</span>);
<a name="l01336"></a>01336         subbandFreqReadoutValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01337"></a>01337         controlLine2Panel.add(subbandFreqReadoutTitleLabel);
<a name="l01338"></a>01338         controlLine2Panel.add(subbandFreqReadoutValueLabel);
<a name="l01339"></a>01339 
<a name="l01340"></a>01340         <span class="comment">// subband number</span>
<a name="l01341"></a>01341         JLabel subbandNumberReadoutTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"Subband: "</span>);
<a name="l01342"></a>01342         subbandNumberReadoutValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01343"></a>01343         controlLine2Panel.add(subbandNumberReadoutTitleLabel);
<a name="l01344"></a>01344         controlLine2Panel.add(subbandNumberReadoutValueLabel);
<a name="l01345"></a>01345 
<a name="l01346"></a>01346         <span class="comment">// subband power</span>
<a name="l01347"></a>01347         JLabel subbandPowerReadoutTitleLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"Power: "</span>);
<a name="l01348"></a>01348         subbandPowerReadoutValueLabel = <span class="keyword">new</span> JLabel(<span class="stringliteral">"   "</span>);
<a name="l01349"></a>01349         controlLine2Panel.add(subbandPowerReadoutTitleLabel);
<a name="l01350"></a>01350         controlLine2Panel.add(subbandPowerReadoutValueLabel);
<a name="l01351"></a>01351 
<a name="l01352"></a>01352 
<a name="l01353"></a>01353 
<a name="l01354"></a>01354         JMenu helpMenu = <span class="keyword">new</span> JMenu(<span class="stringliteral">"Help"</span>);
<a name="l01355"></a>01355         menuBar.add(helpMenu);
<a name="l01356"></a>01356 
<a name="l01360"></a>01360         <span class="keyword">class </span>HelpVersionListener <span class="keyword">implements</span> ActionListener
<a name="l01361"></a>01361         {
<a name="l01367"></a>01367             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)
<a name="l01368"></a>01368             {
<a name="l01369"></a>01369                 JOptionPane.showMessageDialog(
<a name="l01370"></a>01370                         frame,
<a name="l01371"></a>01371                         <span class="stringliteral">"Version: $Revision: 1.30 $ $Date: 2008/10/24 23:39:57 $"</span>,
<a name="l01372"></a>01372                         <span class="stringliteral">"Baseline Display"</span>,  <span class="comment">// dialog title</span>
<a name="l01373"></a>01373                         JOptionPane.INFORMATION_MESSAGE ); 
<a name="l01374"></a>01374             }
<a name="l01375"></a>01375         }
<a name="l01376"></a>01376 
<a name="l01377"></a>01377         JMenuItem showVersionMenuItem =  <span class="keyword">new</span> JMenuItem(<span class="stringliteral">"Show Version..."</span>);
<a name="l01378"></a>01378         showVersionMenuItem.addActionListener(<span class="keyword">new</span> HelpVersionListener());
<a name="l01379"></a>01379         helpMenu.add(showVersionMenuItem);
<a name="l01380"></a>01380 
<a name="l01381"></a>01381         Container cp = getContentPane();
<a name="l01382"></a>01382         cp.setLayout(<span class="keyword">new</span> BorderLayout());
<a name="l01383"></a>01383 
<a name="l01384"></a>01384         cp.add(BorderLayout.NORTH, baselineControlPanel);
<a name="l01385"></a>01385         cp.add(BorderLayout.CENTER, readoutPlot);
<a name="l01386"></a>01386 
<a name="l01387"></a>01387         <span class="comment">// start file reading thread</span>
<a name="l01388"></a>01388         fileScanner = <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineDataFileScanner.html">BaselineDataFileScanner</a>(filename, width, height);
<a name="l01389"></a>01389 
<a name="l01390"></a>01390         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#4411b12968c2bd45d263fdb4bafef95f">redrawImage</a>();
<a name="l01391"></a>01391 
<a name="l01392"></a>01392     }
<a name="l01393"></a>01393 
<a name="l01397"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html">01397</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html">BaselineCmdLineOptions</a>
<a name="l01398"></a>01398     {
<a name="l01399"></a>01399 
<a name="l01400"></a>01400         String filename;
<a name="l01401"></a>01401         <span class="keywordtype">int</span> xpos;
<a name="l01402"></a>01402         <span class="keywordtype">int</span> ypos;
<a name="l01403"></a>01403         <span class="keywordtype">int</span> width;
<a name="l01404"></a>01404         <span class="keywordtype">int</span> height;
<a name="l01405"></a>01405         <span class="keywordtype">boolean</span> slowPlay;
<a name="l01406"></a>01406         <span class="keywordtype">boolean</span> timeAvg;
<a name="l01407"></a>01407 
<a name="l01411"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#3af4f63f2eaad1944046b7d1612e4a58">01411</a>         <span class="keyword">public</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#3af4f63f2eaad1944046b7d1612e4a58">BaselineCmdLineOptions</a>()
<a name="l01412"></a>01412         {
<a name="l01413"></a>01413             filename = <span class="stringliteral">""</span>;
<a name="l01414"></a>01414             xpos = 0;
<a name="l01415"></a>01415             ypos = 0;
<a name="l01416"></a>01416             width = 660;
<a name="l01417"></a>01417             height = 400;
<a name="l01418"></a>01418             slowPlay = <span class="keyword">false</span>;
<a name="l01419"></a>01419             timeAvg = <span class="keyword">false</span>;
<a name="l01420"></a>01420         }
<a name="l01421"></a>01421 
<a name="l01427"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#cbb790f78e414a0f32f45eacb8e3dee0">01427</a>         <span class="keyword">public</span> String <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#cbb790f78e414a0f32f45eacb8e3dee0">getFilename</a>()
<a name="l01428"></a>01428         {
<a name="l01429"></a>01429             <span class="keywordflow">return</span> filename;
<a name="l01430"></a>01430         }
<a name="l01431"></a>01431 
<a name="l01437"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#25e44be900ed60f27d51c714d3fd5563">01437</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#25e44be900ed60f27d51c714d3fd5563">getXpos</a>()
<a name="l01438"></a>01438         {
<a name="l01439"></a>01439             <span class="keywordflow">return</span> xpos;
<a name="l01440"></a>01440         }
<a name="l01441"></a>01441 
<a name="l01447"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#19a621f4800671087f1b91cabf8199e5">01447</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#19a621f4800671087f1b91cabf8199e5">getYpos</a>()
<a name="l01448"></a>01448         {
<a name="l01449"></a>01449             <span class="keywordflow">return</span> ypos;
<a name="l01450"></a>01450         }
<a name="l01451"></a>01451 
<a name="l01457"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#135c1dc22beba9ebef89d90d20d6bbe0">01457</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#135c1dc22beba9ebef89d90d20d6bbe0">getWidth</a>()
<a name="l01458"></a>01458         {
<a name="l01459"></a>01459             <span class="keywordflow">return</span> width;
<a name="l01460"></a>01460         }
<a name="l01461"></a>01461 
<a name="l01467"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#074e970c84b5812a2c9d29b77ed63291">01467</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#074e970c84b5812a2c9d29b77ed63291">getHeight</a>()
<a name="l01468"></a>01468         {
<a name="l01469"></a>01469             <span class="keywordflow">return</span> height;
<a name="l01470"></a>01470         }
<a name="l01471"></a>01471 
<a name="l01477"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#4a7e82addd2dbabbe7664d2e70ab658f">01477</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#4a7e82addd2dbabbe7664d2e70ab658f">getSlowPlay</a>()
<a name="l01478"></a>01478         {
<a name="l01479"></a>01479             <span class="keywordflow">return</span> slowPlay;
<a name="l01480"></a>01480         }
<a name="l01481"></a>01481 
<a name="l01487"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#72c93000ed92faf187e7f6a04266dc6a">01487</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#72c93000ed92faf187e7f6a04266dc6a">getTimeAvg</a>()
<a name="l01488"></a>01488         {
<a name="l01489"></a>01489             <span class="keywordflow">return</span> timeAvg;
<a name="l01490"></a>01490         }
<a name="l01491"></a>01491 
<a name="l01499"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#292abbe2eed069e4c551414428836ae5">01499</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#292abbe2eed069e4c551414428836ae5">parseCommandLineArgs</a>(String[] args)
<a name="l01500"></a>01500         {
<a name="l01501"></a>01501 
<a name="l01502"></a>01502             <span class="keywordtype">int</span> i = 0;
<a name="l01503"></a>01503             <span class="keywordflow">while</span> (i &lt; args.length)
<a name="l01504"></a>01504             {
<a name="l01505"></a>01505 
<a name="l01506"></a>01506                 <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-file"</span>))
<a name="l01507"></a>01507                 {
<a name="l01508"></a>01508                     i++;
<a name="l01509"></a>01509                     <span class="keywordflow">if</span> (i &lt; args.length)
<a name="l01510"></a>01510                     {
<a name="l01511"></a>01511                         filename = args[i++];
<a name="l01512"></a>01512                     }
<a name="l01513"></a>01513                     <span class="keywordflow">else</span>
<a name="l01514"></a>01514                     {
<a name="l01515"></a>01515                         System.out.println(<span class="stringliteral">"Missing filename argument"</span>);
<a name="l01516"></a>01516                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01517"></a>01517                     }
<a name="l01518"></a>01518 
<a name="l01519"></a>01519 
<a name="l01520"></a>01520                 }
<a name="l01521"></a>01521                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-xpos"</span>))
<a name="l01522"></a>01522                 {
<a name="l01523"></a>01523 
<a name="l01524"></a>01524                     i++;
<a name="l01525"></a>01525                     <span class="keywordflow">if</span> (i &lt; args.length)
<a name="l01526"></a>01526                     {
<a name="l01527"></a>01527 
<a name="l01528"></a>01528                         <span class="keywordflow">try</span>
<a name="l01529"></a>01529                         {
<a name="l01530"></a>01530                             xpos = Integer.parseInt(args[i++]);
<a name="l01531"></a>01531                         }
<a name="l01532"></a>01532                         <span class="keywordflow">catch</span> (Exception e)
<a name="l01533"></a>01533                         {
<a name="l01534"></a>01534                             System.out.println(<span class="stringliteral">"invalid x position"</span>);
<a name="l01535"></a>01535                             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01536"></a>01536                         }
<a name="l01537"></a>01537 
<a name="l01538"></a>01538                     }
<a name="l01539"></a>01539                     <span class="keywordflow">else</span>
<a name="l01540"></a>01540                     {
<a name="l01541"></a>01541                         System.out.println(<span class="stringliteral">"Missing xpos argument"</span>);
<a name="l01542"></a>01542                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01543"></a>01543                     }
<a name="l01544"></a>01544 
<a name="l01545"></a>01545                 }
<a name="l01546"></a>01546                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-ypos"</span>))
<a name="l01547"></a>01547                 {
<a name="l01548"></a>01548 
<a name="l01549"></a>01549                     i++;
<a name="l01550"></a>01550                     <span class="keywordflow">if</span> (i &lt; args.length)
<a name="l01551"></a>01551                     {
<a name="l01552"></a>01552 
<a name="l01553"></a>01553                         <span class="keywordflow">try</span>
<a name="l01554"></a>01554                         {
<a name="l01555"></a>01555                             ypos = Integer.parseInt(args[i++]);
<a name="l01556"></a>01556                         }
<a name="l01557"></a>01557                         <span class="keywordflow">catch</span> (Exception e)
<a name="l01558"></a>01558                         {
<a name="l01559"></a>01559                             System.out.println(<span class="stringliteral">"invalid y position"</span>);
<a name="l01560"></a>01560                             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01561"></a>01561                         }
<a name="l01562"></a>01562 
<a name="l01563"></a>01563                     }
<a name="l01564"></a>01564                     <span class="keywordflow">else</span>
<a name="l01565"></a>01565                     {
<a name="l01566"></a>01566                         System.out.println(<span class="stringliteral">"Missing ypos argument"</span>);
<a name="l01567"></a>01567                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01568"></a>01568                     }
<a name="l01569"></a>01569                 }
<a name="l01570"></a>01570                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-width"</span>))
<a name="l01571"></a>01571                 { 
<a name="l01572"></a>01572 
<a name="l01573"></a>01573                     i++;
<a name="l01574"></a>01574                     <span class="keywordflow">if</span> (i &lt; args.length)
<a name="l01575"></a>01575                     {
<a name="l01576"></a>01576 
<a name="l01577"></a>01577                         <span class="keywordflow">try</span>
<a name="l01578"></a>01578                         {
<a name="l01579"></a>01579                             width = Integer.parseInt(args[i++]);
<a name="l01580"></a>01580                         }
<a name="l01581"></a>01581                         <span class="keywordflow">catch</span> (Exception e)
<a name="l01582"></a>01582                         {
<a name="l01583"></a>01583                             System.out.println(<span class="stringliteral">"invalid width"</span>);
<a name="l01584"></a>01584                             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01585"></a>01585                         }
<a name="l01586"></a>01586 
<a name="l01587"></a>01587                     }
<a name="l01588"></a>01588                     <span class="keywordflow">else</span>
<a name="l01589"></a>01589                     {
<a name="l01590"></a>01590                         System.out.println(<span class="stringliteral">"Missing width argument"</span>);
<a name="l01591"></a>01591                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01592"></a>01592                     }
<a name="l01593"></a>01593                 }
<a name="l01594"></a>01594                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-height"</span>))
<a name="l01595"></a>01595                 { 
<a name="l01596"></a>01596 
<a name="l01597"></a>01597                     i++;
<a name="l01598"></a>01598                     <span class="keywordflow">if</span> (i &lt; args.length)
<a name="l01599"></a>01599                     {
<a name="l01600"></a>01600 
<a name="l01601"></a>01601                         <span class="keywordflow">try</span>
<a name="l01602"></a>01602                         {
<a name="l01603"></a>01603                             height = Integer.parseInt(args[i++]);
<a name="l01604"></a>01604                         }
<a name="l01605"></a>01605                         <span class="keywordflow">catch</span> (Exception e)
<a name="l01606"></a>01606                         {
<a name="l01607"></a>01607                             System.out.println(<span class="stringliteral">"invalid height"</span>);
<a name="l01608"></a>01608                             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01609"></a>01609                         }
<a name="l01610"></a>01610 
<a name="l01611"></a>01611                     }
<a name="l01612"></a>01612                     <span class="keywordflow">else</span>
<a name="l01613"></a>01613                     {
<a name="l01614"></a>01614                         System.out.println(<span class="stringliteral">"Missing height argument"</span>);
<a name="l01615"></a>01615                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01616"></a>01616                     }
<a name="l01617"></a>01617                 }
<a name="l01618"></a>01618                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-slow"</span>))
<a name="l01619"></a>01619                 {
<a name="l01620"></a>01620 
<a name="l01621"></a>01621                     i++;
<a name="l01622"></a>01622                     slowPlay = <span class="keyword">true</span>;
<a name="l01623"></a>01623 
<a name="l01624"></a>01624                 }
<a name="l01625"></a>01625                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i].equals(<span class="stringliteral">"-timeavg"</span>))
<a name="l01626"></a>01626                 {
<a name="l01627"></a>01627 
<a name="l01628"></a>01628                     i++;
<a name="l01629"></a>01629                     timeAvg = <span class="keyword">true</span>;
<a name="l01630"></a>01630 
<a name="l01631"></a>01631                 }
<a name="l01632"></a>01632                 <span class="keywordflow">else</span>
<a name="l01633"></a>01633                 {
<a name="l01634"></a>01634                     System.out.println(<span class="stringliteral">"invalid option: "</span> + args[i]);
<a name="l01635"></a>01635                     System.out.println(<span class="stringliteral">"valid options: -file &lt;filename&gt; -xpos &lt;x position&gt; -ypos &lt;y position&gt; -width &lt;width&gt; -height &lt;height&gt; -slow -timeavg"</span>);
<a name="l01636"></a>01636                     System.out.println(<span class="stringliteral">"-file: SonATA baselines filename"</span>);
<a name="l01637"></a>01637                     System.out.println(<span class="stringliteral">"-xpos: window x position"</span>);
<a name="l01638"></a>01638                     System.out.println(<span class="stringliteral">"-ypos: window y position"</span>);
<a name="l01639"></a>01639                     System.out.println(<span class="stringliteral">"-width: window width (default: "</span> + width + <span class="stringliteral">")"</span>);
<a name="l01640"></a>01640                     System.out.println(<span class="stringliteral">"-height: window height (default: "</span> + height + <span class="stringliteral">")"</span>);
<a name="l01641"></a>01641                     System.out.println(<span class="stringliteral">"-slow: display data slowly"</span>);
<a name="l01642"></a>01642                     System.out.println(<span class="stringliteral">"-timeavg: display data as a time average"</span>);
<a name="l01643"></a>01643                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01644"></a>01644                 } 
<a name="l01645"></a>01645             }
<a name="l01646"></a>01646 
<a name="l01647"></a>01647             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01648"></a>01648         }
<a name="l01649"></a>01649 
<a name="l01650"></a>01650     }
<a name="l01651"></a>01651 
<a name="l01657"></a><a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#c3328547223999b52f79280102e19b1f">01657</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#c3328547223999b52f79280102e19b1f">main</a>(String[] args)
<a name="l01658"></a>01658     {
<a name="l01659"></a>01659 
<a name="l01660"></a>01660         <span class="keywordtype">int</span> imageWidth=1024;
<a name="l01661"></a>01661         <span class="keywordtype">int</span> imageHeight=800;
<a name="l01662"></a>01662 
<a name="l01663"></a>01663         <span class="keywordtype">float</span> pixelScaleFactor=1;
<a name="l01664"></a>01664         <span class="keywordtype">float</span> pixelOffsetFactor=0;
<a name="l01665"></a>01665 
<a name="l01666"></a>01666         <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html">BaselineCmdLineOptions</a> options = <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html">BaselineCmdLineOptions</a>();
<a name="l01667"></a>01667         <span class="keywordflow">if</span> ( ! options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#292abbe2eed069e4c551414428836ae5">parseCommandLineArgs</a>(args) )
<a name="l01668"></a>01668         {
<a name="l01669"></a>01669             System.exit(1);
<a name="l01670"></a>01670         }
<a name="l01671"></a>01671 
<a name="l01672"></a>01672         JFrame frame = <span class="keyword">new</span> JFrame(<span class="stringliteral">"Baseline Display"</span>);
<a name="l01673"></a>01673         frame.setLocation(<span class="keyword">new</span> Point(options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#25e44be900ed60f27d51c714d3fd5563">getXpos</a>(), options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#19a621f4800671087f1b91cabf8199e5">getYpos</a>()));
<a name="l01674"></a>01674 
<a name="l01675"></a>01675         JApplet applet =
<a name="l01676"></a>01676             <span class="keyword">new</span> <a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay.html#f8037e3d23666e13f88124c78c3198d9">BaselineDisplay</a>(frame, options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#cbb790f78e414a0f32f45eacb8e3dee0">getFilename</a>(), 
<a name="l01677"></a>01677                     imageWidth, imageHeight, 
<a name="l01678"></a>01678                     pixelScaleFactor, pixelOffsetFactor,
<a name="l01679"></a>01679                     options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#4a7e82addd2dbabbe7664d2e70ab658f">getSlowPlay</a>(),
<a name="l01680"></a>01680                     options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#72c93000ed92faf187e7f6a04266dc6a">getTimeAvg</a>());
<a name="l01681"></a>01681 
<a name="l01682"></a>01682         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
<a name="l01683"></a>01683         frame.getContentPane().add(applet);
<a name="l01684"></a>01684         frame.setSize(options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#135c1dc22beba9ebef89d90d20d6bbe0">getWidth</a>(), options.<a class="code" href="classopensonata_1_1dataDisplays_1_1BaselineDisplay_1_1BaselineCmdLineOptions.html#074e970c84b5812a2c9d29b77ed63291">getHeight</a>());
<a name="l01685"></a>01685         applet.init();
<a name="l01686"></a>01686         applet.start();
<a name="l01687"></a>01687         frame.setVisible(<span class="keyword">true</span>);
<a name="l01688"></a>01688     }
<a name="l01689"></a>01689 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small><a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> </small></address>
</body>
</html>
